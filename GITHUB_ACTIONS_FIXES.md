# GitHub Actions æµ‹è¯•é—®é¢˜ä¿®å¤

## ğŸ”§ ä¿®å¤çš„é—®é¢˜

### 1. YAML è¯­æ³•é”™è¯¯
- **é—®é¢˜**: `.github/workflows/build-test.yml` ç¬¬77è¡Œç¼ºå°‘é—­åˆèŠ±æ‹¬å·
- **ä¿®å¤**: `GH_TOKEN: ${{ secrets.GITHUB_TOKEN }` â†’ `GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}`

### 2. æµ‹è¯•å‘½ä»¤è¯­æ³•é—®é¢˜
- **é—®é¢˜**: Vitest å‘½ä»¤è¡Œå‚æ•°ä¸æ­£ç¡®
- **ä¿®å¤**: 
  ```yaml
  # é”™è¯¯çš„å‘½ä»¤
  run: npm test -- test/services
  
  # æ­£ç¡®çš„å‘½ä»¤
  run: npm run test:services
  ```

### 3. ç¼ºå°‘ä¾èµ–é¡¹
- **é—®é¢˜**: ç¼ºå°‘è¦†ç›–ç‡å’Œ UI æµ‹è¯•ç›¸å…³ä¾èµ–
- **ä¿®å¤**: åœ¨ `package.json` ä¸­æ·»åŠ ï¼š
  ```json
  "@vitest/coverage-v8": "^1.0.0",
  "@vitest/ui": "^1.0.0"
  ```

### 4. TypeScript é…ç½®é—®é¢˜
- **é—®é¢˜**: æµ‹è¯•æ–‡ä»¶ä¸åœ¨ TypeScript ç¼–è¯‘èŒƒå›´å†…
- **ä¿®å¤**: 
  ```json
  {
    "include": ["test/**/*"],
    "types": ["node", "vitest/globals"]
  }
  ```

### 5. Mock è¯­æ³•é—®é¢˜
- **é—®é¢˜**: åœ¨ç»„åˆå‡½æ•°æµ‹è¯•ä¸­ä½¿ç”¨äº†é”™è¯¯çš„ mock è¯­æ³•
- **ä¿®å¤**: 
  ```typescript
  // é”™è¯¯
  vi.mocked(schemaService.createSchema)
  
  // æ­£ç¡®
  mockSchemaService.createSchema
  ```

### 6. æµ‹è¯•è®¾ç½®é—®é¢˜
- **é—®é¢˜**: å…¨å±€å˜é‡å£°æ˜å’Œç±»å‹å®šä¹‰ä¸æ­£ç¡®
- **ä¿®å¤**: 
  - æ·»åŠ  `test/types.d.ts` ç±»å‹å£°æ˜
  - ä¿®å¤ `test/setup.ts` ä¸­çš„å…¨å±€å˜é‡è®¾ç½®

## ğŸ“ æ–°å¢æ–‡ä»¶

### æµ‹è¯•ç›¸å…³
- `test/types.d.ts` - æµ‹è¯•ç±»å‹å£°æ˜
- `test/basic.test.ts` - åŸºç¡€æµ‹è¯•éªŒè¯
- `test/README.md` - æµ‹è¯•æ¶æ„æ–‡æ¡£

### GitHub Actions
- `.github/workflows/simple-test.yml` - ç®€åŒ–çš„æµ‹è¯•å·¥ä½œæµï¼ˆç”¨äºè°ƒè¯•ï¼‰
- `.github/workflows/test-quality.yml` - æµ‹è¯•è´¨é‡æ£€æŸ¥å·¥ä½œæµ

## ğŸ¯ æ”¹è¿›çš„å·¥ä½œæµ

### ä¸»è¦æµ‹è¯•æµç¨‹ (`build-test.yml`)
1. **æµ‹è¯•é˜¶æ®µ**: è¿è¡Œæ‰€æœ‰æµ‹è¯•
2. **æ„å»ºé˜¶æ®µ**: æ„å»ºåº”ç”¨ç¨‹åº
3. **å¤šå¹³å°æ”¯æŒ**: Ubuntu, Windows, macOS

### ç®€åŒ–æµ‹è¯•æµç¨‹ (`simple-test.yml`)
1. **è°ƒè¯•å‹å¥½**: è¯¦ç»†çš„æ—¥å¿—è¾“å‡º
2. **ç»“æ„éªŒè¯**: æ£€æŸ¥æ–‡ä»¶ç»“æ„
3. **åŸºç¡€æµ‹è¯•**: ç¡®ä¿æµ‹è¯•ç¯å¢ƒæ­£å¸¸

### è´¨é‡æ£€æŸ¥æµç¨‹ (`test-quality.yml`)
1. **è¦†ç›–ç‡æŠ¥å‘Š**: ç”Ÿæˆè¯¦ç»†è¦†ç›–ç‡
2. **æ¶æ„éªŒè¯**: ç®€åŒ–çš„æ¶æ„æ£€æŸ¥
3. **æ€§èƒ½ç›‘æ§**: åŸºç¡€æ€§èƒ½æµ‹è¯•

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æœ¬åœ°æµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šç±»å‹æµ‹è¯•
npm run test:services
npm run test:composables
npm run test:stores

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

### CI/CD éªŒè¯
1. æ¨é€ä»£ç åˆ° GitHub
2. æ£€æŸ¥ Actions æ ‡ç­¾é¡µ
3. æŸ¥çœ‹æµ‹è¯•ç»“æœå’Œæ—¥å¿—
4. å¦‚æœ‰é—®é¢˜ï¼ŒæŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **ä¾èµ–å®‰è£…å¤±è´¥**: æ£€æŸ¥ `package.json` ä¸­çš„ä¾èµ–ç‰ˆæœ¬
2. **æµ‹è¯•è¶…æ—¶**: å¢åŠ æµ‹è¯•è¶…æ—¶æ—¶é—´æˆ–æ£€æŸ¥å¼‚æ­¥æ“ä½œ
3. **ç±»å‹é”™è¯¯**: ç¡®ä¿ `test/types.d.ts` åŒ…å«å¿…è¦çš„ç±»å‹å£°æ˜
4. **Mock å¤±è´¥**: æ£€æŸ¥ mock è¯­æ³•å’Œæ¨¡å—è·¯å¾„

### è°ƒè¯•æŠ€å·§
1. ä½¿ç”¨ `simple-test.yml` å·¥ä½œæµè¿›è¡ŒåŸºç¡€éªŒè¯
2. æœ¬åœ°è¿è¡Œ `npm test -- --reporter=verbose` è·å–è¯¦ç»†è¾“å‡º
3. æ£€æŸ¥ GitHub Actions æ—¥å¿—ä¸­çš„å…·ä½“é”™è¯¯ä¿¡æ¯
4. ä½¿ç”¨ `npm run test:ui` åœ¨æœ¬åœ°è°ƒè¯•æµ‹è¯•

## âœ… éªŒè¯æ¸…å•

- [ ] YAML è¯­æ³•æ­£ç¡®ï¼ˆæ— ç¼©è¿›é”™è¯¯ï¼‰
- [ ] æ‰€æœ‰ä¾èµ–é¡¹å·²å®‰è£…
- [ ] TypeScript é…ç½®åŒ…å«æµ‹è¯•æ–‡ä»¶
- [ ] Mock è¯­æ³•æ­£ç¡®
- [ ] æµ‹è¯•è®¾ç½®æ–‡ä»¶æ­£ç¡®é…ç½®
- [ ] åŸºç¡€æµ‹è¯•é€šè¿‡
- [ ] æ„å»ºè¿‡ç¨‹æˆåŠŸ

è¿™äº›ä¿®å¤ç¡®ä¿äº† GitHub Actions èƒ½å¤Ÿæ­£ç¡®è¿è¡Œæ–°çš„åˆ†å±‚æµ‹è¯•æ¶æ„ã€‚