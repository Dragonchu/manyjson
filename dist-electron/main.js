"use strict";const e=require("electron"),a=require("path"),i=require("fs"),l=process.env.NODE_ENV==="development";function s(){const n=new e.BrowserWindow({width:1200,height:800,minWidth:1e3,minHeight:700,title:"ManyJson - JSON Schema Manager",backgroundColor:e.nativeTheme.shouldUseDarkColors?"#0a0a0a":"#ffffff",webPreferences:{preload:a.join(__dirname,"preload.js"),contextIsolation:!0,sandbox:!0,nodeIntegration:!1}});return l?(n.loadURL("http://localhost:5173"),n.webContents.openDevTools()):n.loadFile(a.join(__dirname,"../dist/index.html")),n}e.ipcMain.handle("write-json-file",async(n,o,r)=>{try{return await i.promises.writeFile(o,r,"utf8"),{success:!0}}catch(t){return console.error("Failed to write file:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}});e.ipcMain.handle("show-open-dialog",async(n,o)=>{try{return await e.dialog.showOpenDialog(o)}catch(r){return console.error("Failed to show open dialog:",r),{canceled:!0,filePaths:[]}}});e.ipcMain.handle("show-save-dialog",async(n,o)=>{try{return await e.dialog.showSaveDialog(o)}catch(r){return console.error("Failed to show save dialog:",r),{canceled:!0,filePath:void 0}}});e.ipcMain.handle("delete-file",async(n,o)=>{try{return await i.promises.unlink(o),{success:!0}}catch(r){return console.error("Failed to delete file:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}});e.app.whenReady().then(()=>{s(),e.app.on("activate",()=>{e.BrowserWindow.getAllWindows().length===0&&s()})});e.app.on("window-all-closed",()=>{process.platform!=="darwin"&&e.app.quit()});e.app.on("web-contents-created",(n,o)=>{o.on("new-window",(r,t)=>{r.preventDefault(),console.warn("Blocked new window creation:",t)})});
