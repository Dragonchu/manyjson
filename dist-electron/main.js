"use strict";const e=require("electron"),a=require("path"),s=require("fs"),l=process.env.NODE_ENV==="development";function i(){const n=new e.BrowserWindow({width:1200,height:800,minWidth:1e3,minHeight:700,title:"ManyJson - JSON Schema Manager",backgroundColor:e.nativeTheme.shouldUseDarkColors?"#0a0a0a":"#ffffff",webPreferences:{preload:a.join(__dirname,"preload.js"),contextIsolation:!0,sandbox:!0,nodeIntegration:!1}});return l?(n.loadURL("http://localhost:5173"),n.webContents.openDevTools()):n.loadFile(a.join(__dirname,"../dist/index.html")),n}e.ipcMain.handle("write-json-file",async(n,r,o)=>{try{return await s.promises.writeFile(r,o,"utf8"),{success:!0}}catch(t){return console.error("Failed to write file:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}});e.ipcMain.handle("show-open-dialog",async(n,r)=>{try{return await e.dialog.showOpenDialog(r)}catch(o){return console.error("Failed to show open dialog:",o),{canceled:!0,filePaths:[]}}});e.ipcMain.handle("show-save-dialog",async(n,r)=>{try{return await e.dialog.showSaveDialog(r)}catch(o){return console.error("Failed to show save dialog:",o),{canceled:!0,filePath:void 0}}});e.app.whenReady().then(()=>{i(),e.app.on("activate",()=>{e.BrowserWindow.getAllWindows().length===0&&i()})});e.app.on("window-all-closed",()=>{process.platform!=="darwin"&&e.app.quit()});e.app.on("web-contents-created",(n,r)=>{r.on("new-window",(o,t)=>{o.preventDefault(),console.warn("Blocked new window creation:",t)})});
